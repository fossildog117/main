<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="http://cdn.opalrb.org/opal/current/opal.js"></script>
        <script src="http://cdn.opalrb.org/opal/current/opal-parser.js"></script>
        <script type="text/javascript">Opal.load('opal-parser')</script>
        <title>Learn Ruby</title>

        <!-- Bootstrap -->
        <link href="../assets/css/bootstrap.min.css" rel="stylesheet">

        <style type="text/css">
            body {
                padding: 20px 50px; }

            .examplecode {
                margin: 20px 20px;
                background-color: #262626;
                color: #ffffff;
                padding: 10px 10px; }

            .codebutton {
                display:inline;
                margin: 0 0 0 auto; }

            .graphic {
                text-align: center; }

            .indent1 {
                text-indent: 2em; }
        </style>

        <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->
        <script src="../assets/js/maze.js"></script>
    </head>
    <body>
        <nav>
            <ul class="pager">
                <li class="previous"><a href="../index.html"><span aria-hidden="true">&larr;</span> Back</a></li>
            </ul>
        </nav>
        <div class="page-header">
            <h1>Bubble Sort</h1>
        </div>
        <p>Sorting lists is a very important concept in computer science and subsequently there are many different sorting algorithms, one of the simplest is bubble sort. Bubble sort goes through a list comparing adjacent elements and swapping them around if they are in the wrong order. It is applied repeatedly until no more swaps are needed.</p>
        <hr />
        <h3>Arrays</h3>
        <p>Before we can sort lists we first need to understand how they are stored. An array stores a list of values in Ruby.</p>
        <p>One way of viewing an array is a line of numbered boxes. These numbers are the indexes, they count from 0 and allow you to access the content inside each box<p>
        <!-- Image of array indexing -->
        <p>An array ca be created like so: </p>
        <div class="panel panel-default">
            <div class="panel-body examplecode">
                <p>arr = [1,2,3,4,5]</p>
            </div>
            <div class="panel-footer">
                <p>Creates an array with the values 1 to 5 and stores it in a variable arr.</p>
            </div>
        </div>
        <p>And then values can be accessed like so:</p>
        <div class="panel panel-default">
            <div class="panel-body examplecode">
                <p>arr[2]</p>
            </div>
            <div class="panel-footer">
                <p>Gets the value in index 2 of the arr array, which will be 3 as indexing counts from 0</p>
            </div>
        </div>
        <p>It is also useful to be able to go through every value in an array, you can do this with a for loop like so:</p>
        <div class="panel panel-default">
            <div class="panel-body examplecode">
                <p>i = 0</p>
                <p>sum = 0</p>
                <p>while (i < arr.length)</p>
                <p class="indent1">sum = sum + arr[i]</p>
                <p>end</p>
            </div>
            <div class="panel-footer">
                <p>Goes through the array adding all the values together to get a final sum of values</p>
            </div>
        </div>
        <p>Now that you understand arrays a bit better here is the bubble sort algorithm</p>
        <hr />
        <div class="panel panel-success">
            <div class="panel-heading">
                <h3 class="panel-title">Bubble Sort Algorithm</h3>
            </div>
            <div class="panel-body">
                <ol>
                    <li>Take the first element in the list and compare it to the second element. If they are in the wrong order swap the pair around and move to step 2. If they are in the correct order move to step 3</li>
                    <li>Take the same element and compare it to the element to its right. If they are in the wrong order swap the pair around and move to step 4.</li>
                    <li>Take the next element in the list and compare it to the element to its right. If they are in the wrong order swap the pair around and move to step 4.</li>
                    <li>If the elements are in order move to the next element and go to step 2. If there is no element to the right return to the first element return to step 1</li>
                </ol>
            </div>
        </div>
        <p>This can seem like quite a daunting algorithm at first however it is fairly simple. Here is a step by step example: </p>
        <div style="margin: 30px 30px;">
            <hr />
            <p>Order the list of numbers: ( 8 2 5 1 4 )</p>
            <p><b>First Pass</b></p>
            <div style="line-height:25%;">
                <p>( <b>8 2</b> 5 1 4 ) &#8594; ( <b>2 8</b> 5 1 4 ) The algorithm compares 8 and 2 and swaps them around since 8 > 2</p>
                <p>( 2 <b>8 5</b> 1 4 ) &#8594; ( 2 <b>5 8</b> 1 4 ) We swap here since 8 > 5 </p>
                <p>( 2 5 <b>8 1</b> 4 ) &#8594; ( 2 5 <b>1 8</b> 4 ) 8 > 1 so we swap again</p>
                <p>( 2 5 1 <b>8 4</b> ) &#8594; ( 2 5 1 <b>4 8</b> )</p>
            </div>
            <p><b>Second Pass</b><p>
            <div style="line-height:25%;">
                <p>( <b>2 5</b> 1 4 8 ) &#8594; ( <b>2 5</b> 1 4 8 ) 2 and 5 are already in order so the algorithm does not swap them </p>
                <p>( 2 <b>5 1</b> 4 8 ) &#8594; ( 2 <b>1 5</b> 4 8 )</p>
                <p>( 2 1 <b>5 4</b> 8 ) &#8594; ( 2 1 <b>4 5</b> 8 )</p>
                <p>( 2 1 4 <b>5 8</b> ) &#8594; ( 2 1 4 <b>5 8</b> )</p>
            </div>
            <p><b>Third Pass</b></p>
            <div style="line-height:25%;">
                <p>( <b>2 1</b> 4 5 8 ) &#8594; ( <b>1 2</b> 4 5 8 )</p>
            </div>
            <br />
        </div>
        <hr />
        <h3>Try it yourself!</h3>
        <p>Try to write the bubble sort algorithm in Ruby in the form bubbleSort(array). It will be tested with a couple of different lists so you can see if it works, the results will be printed below.</p>
        <div class="panel panel-primary">
            <div class="panel-heading">
                <h3 class="panel-title">CodeBox <button type="button" onclick="Opal.eval(document.getElementById('sortcode').value);Opal.Object.$printOutput();" class="btn btn-default btn-default-lg codebutton">
                    <span class="glyphicon glyphicon-play" aria-hidden="true"></span>
                </button></h3>
            </div>
            <div class="panel-body">
                <textarea name="codebox" class="form-control" rows="5" id="sortcode"></textarea>
            </div>
            <div class="panel-footer">
                <p>Output: </p>
                <pre id="output"></pre>
            </div>
        </div>  
        <script type="text/ruby">
            $arr = [[5,3,7,3,7,3,99,32,2],[8,45,3,2,4],[1,7,4,3,2],[4,6,4,23,6,3,6,3]]

            def printOutput
                output = ""
                $arr.each { |array|
                    output = output + array.inspect + "  ->  " + bubbleSort(array).inspect + "\n"
                }
                %x{document.getElementById('output').innerHTML = #{output};}
            end
        </script>
        <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
        <!-- Include all compiled plugins (below), or include individual files as needed -->
        <script src="../assets/js/bootstrap.min.js"></script>
    </body>
</html>
